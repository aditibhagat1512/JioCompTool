<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Increment Budgeting – Jio Pagaar</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f4f6f9;
    }

    .container {
      display: grid;
      grid-template-columns: 250px 1fr;
      height: 100vh;
    }

    .sidebar {
      padding: 20px;
      background: #fff;
      border-right: 1px solid #ddd;
    }

    .sidebar h3 {
      margin-bottom: 20px;
      color: #001a70;
    }
    .sidebar label,
    .sidebar select {
      display: block;
      margin-bottom: 15px;
      width: 100%;
    }

    .main {
      padding: 30px;
      overflow-y: auto;
    }

    .kpi-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }

    .card {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      text-align: center;
    }

    .tabs {
      display: flex;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tabs button {
      padding: 10px 20px;
      margin: 5px 10px 5px 0;
      background: #e0e0e0;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .tabs button.active {
      background: #001a70;
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      margin-bottom: 20px;
    }

    table th,
    table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    .chart-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">

    <div class="sidebar">
                       <!-- ✅ One Back Button to Planner Submodules -->
   <a href="jiopagaar.html#plannerSubmodules" class="back-btn">← Back to Budgeting</a>
      <h3>Filters</h3>
      <label>Org<select><option>Jio</option></select></label>
      <label>Business Unit <select><option>Connectivity</option><option>Platform</option></select></label>
      <label>Function<select><option>HR</option><option>Sales</option></select></label>
      <label>Grade <select><option>Manager</option><option>Executive</option></select></label>
      <label>Location <select><option>Mumbai</option><option>Delhi</option></select></label>
      <label>Cost Centre <select><option>BU101</option></select></label>
      <label>Last Increment Cycle <select><option>FY 2024</option></select></label>
    </div>

    <div class="main">
      <h1>Increment Budgeting</h1>
      <div class="kpi-row">
        <div class="card"><strong>Total Increment Budget</strong><br>₹3.80 Cr</div>
        <div class="card"><strong>% of Overall Salary Budget</strong><br>9.5%</div>
        <div class="card"><strong>Utilization</strong><br>56%</div>
      </div>
      <div class="tabs">
        <button onclick="showTab('manageIncrements')">Manage Increments</button>
        <button class="active" onclick="showTab('allocation')">Allocation Table</button>
        <button onclick="showTab('simulation')">Simulation Tool</button>
        <button onclick="showTab('benchmarking')">Benchmarking</button>
        <!-- <button onclick="showTab('trends')">Trend Analysis</button> -->
        <!-- <button onclick="showTab('distribution')">Distribution & Heatmap</button> -->
        <button onclick="showTab('ai')">AI Recommendations</button>
        <button onclick="showTab('integration')">Integration & Export</button>
        <button onclick="showTab('alerts')">Controls & Alerts</button>
      </div>

      <div id="manageIncrements" class="tab-content">
  <div class="chart-box">
    <h3>Increment Allocation by Rating</h3>
    <table>
      <thead>
        <tr>
          <th>Employee ID</th>
          <th>Name</th>
          <th>Function</th>
          <th>Current CTC (₹)</th>
          <th>Rating</th>
          <th>Suggested Hike (%)</th>
          <th>New CTC (₹)</th>
        </tr>
      </thead>
      <tbody id="incrementTable">
        <!-- JavaScript will populate rows -->
      </tbody>
    </table>
    <button onclick="submitIncrements()">Submit Increments</button>
  </div>
</div>


      <div id="allocation" class="tab-content active">
        <table>
          <thead>
            <tr>
              <th>Business Unit</th>
              <th>Headcount</th>
              <th>Avg CTC</th>
              <th>Proposed % Hike</th>
              <th>Proposed CTC</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Sales</td><td>30</td><td>₹12.2L</td><td>7.5%</td><td>₹13.12L</td></tr>
            <tr><td>Technology</td><td>120</td><td>₹12.2L</td><td>9.0%</td><td>₹13.30L</td></tr>
            <tr><td>Corporate</td><td>12</td><td>₹14 Cr</td><td>5.0%</td><td>₹14.70 Cr</td></tr>
            <tr><td>Finance</td><td>83</td><td>₹14 Cr</td><td>10.0%</td><td>₹15.40 Cr</td></tr>
          </tbody>
        </table>
      </div>
      <div id="simulation" class="tab-content">
        <div class="chart-box">
          <h3>Simulated Budget Impact</h3>
          <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
            <div>
              <label>Increase % for Sales:</label>
              <input type="range" min="0" max="20" value="8" id="sliderSales" oninput="updateSimChart()">
              <span id="valSales">8%</span>
            </div>
            <div>
              <label>Increase % for Tech:</label>
              <input type="range" min="0" max="20" value="10" id="sliderTech" oninput="updateSimChart()">
              <span id="valTech">10%</span>
            </div>
            <div>
              <label>Increase % for Corporate:</label>
              <input type="range" min="0" max="20" value="7" id="sliderCorporate" oninput="updateSimChart()">
              <span id="valCorporate">7%</span>
            </div>
            <div>
              <label>Increase % for Finance:</label>
              <input type="range" min="0" max="20" value="9" id="sliderFinance" oninput="updateSimChart()">
              <span id="valFinance">9%</span>
            </div>
          </div>
          <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
            <div><strong>Total Estimated Wage Bill Impact: </strong><span id="simTotal">₹4.30 Cr</span></div>
            <div><strong>Recommended Budget Limit: </strong><span>₹4.00 Cr</span></div>
            <div><strong>Status: </strong><span id="simStatus" style="color: orange;">Over Budget</span></div>
            <div>
              <button onclick="exportSimulation()">Export Simulation (PDF)</button>
              <button onclick="saveScenario()">Save Scenario</button>
            </div>
          </div>
          <canvas id="simChart"></canvas>
        </div>
      </div>
      <div id="ai" class="tab-content">
        <div class="chart-box">
          <h3>AI-Recommended Hikes</h3>
          <table>
            <thead>
              <tr>
                <th>Business Unit</th>
                <th>Attrition Risk (%)</th>
                <th>Performance Score (avg)</th>
                <th>Market Benchmark (%)</th>
                <th>AI Suggested Hike %</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Sales</td><td>22%</td><td>4.7 / 5</td><td>9%</td><td><strong>11%</strong></td></tr>
              <tr><td>Technology</td><td>16%</td><td>4.3 / 5</td><td>10%</td><td><strong>10.5%</strong></td></tr>
              <tr><td>Corporate</td><td>7%</td><td>3.6 / 5</td><td>8%</td><td><strong>7%</strong></td></tr>
              <tr><td>Finance</td><td>18%</td><td>4.8 / 5</td><td>11%</td><td><strong>12%</strong></td></tr>
            </tbody>
          </table>
          <p style="margin-top: 10px; font-style: italic;">
            Logic: AI calculates recommended hikes by weighing attrition risk, performance score, and market benchmark using a weighted score (e.g., 40% performance, 35% attrition, 25% market benchmark).
          </p>
        </div>
      </div>

      <div id="benchmarking" class="tab-content">
        <div class="chart-box">
          <h3>Benchmarking Comparison</h3>
          <table>
            <thead>
              <tr>
                <th>Grade</th>
                <th>Internal Avg Hike %</th>
                <th>Industry Avg Hike %</th>
                <th>Gap %</th>
                <th>Flag</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>L1</td><td>6.5%</td><td>8.0%</td><td>-1.5%</td><td style="color: red;">Below Market</td></tr>
              <tr><td>L2</td><td>8.0%</td><td>8.2%</td><td>-0.2%</td><td style="color: orange;">Near Market</td></tr>
              <tr><td>L3</td><td>9.5%</td><td>8.5%</td><td>+1.0%</td><td style="color: green;">Above Market</td></tr>
              <tr><td>L4</td><td>11.0%</td><td>9.0%</td><td>+2.0%</td><td style="color: green;">Above Market</td></tr>
            </tbody>
          </table>
          <div style="margin-top: 20px; display: flex; gap: 20px; flex-wrap: wrap;">
            <button onclick="downloadBenchmarkPDF()">Download Benchmark Report (PDF)</button>
            <button onclick="highlightMarketGaps()">Highlight >2% Gaps</button>
            <button onclick="adjustToMarket()">Auto-Suggest Adjustments</button>
          </div>
        </div>
      </div>
      <div id="integration" class="tab-content">
        <div class="chart-box">
          <h3>Integration & Export Tools</h3>
          <div style="display: flex; gap: 20px; flex-wrap: wrap;">
            <div>
              <label for="uploadFile">Import CSV/Excel File:</label><br>
              <input type="file" id="uploadFile" accept=".csv, .xlsx" />
            </div>
            <div>
              <button onclick="downloadExcel()">Download Excel</button>
            </div>
            <div>
              <button onclick="downloadPDF()">Download PDF</button>
            </div>
            <div>
              <button onclick="generateLetters()">Generate Letters</button>
            </div>
            <div>
              <button onclick="syncPayroll()">Sync with Payroll</button>
            </div>
          </div>
        </div>
      </div>

      <div id="alerts" class="tab-content">
        <div class="chart-box">
          <h3>Controls & Alerts</h3>
          <table>
            <thead>
              <tr>
                <th>Rule</th>
                <th>Threshold</th>
                <th>Status</th>
                <th>Action Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Zero Hike Count</td>
                <td>&lt; 5%</td>
                <td style="color: red;">8%</td>
                <td><button onclick="reviewZeroHikes()">Review</button></td>
              </tr>
              <tr>
                <td>Budget Utilization</td>
                <td>&le; 100%</td>
                <td style="color: orange;">102%</td>
                <td><button onclick="adjustBudget()">Adjust</button></td>
              </tr>
              <tr>
                <td>Hike Ceiling by Level</td>
                <td>Senior Manager: ≤ 15%</td>
                <td style="color: green;">Compliant</td>
                <td>None</td>
              </tr>
              <tr>
                <td>Market Gap Breach</td>
                <td>&le; ±2%</td>
                <td style="color: red;">L3 +3.5%</td>
                <td><button onclick="alignMarketGap()">Resolve</button></td>
              </tr>
            </tbody>
          </table>
          <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
            <button onclick="exportAlertsToPDF()">Download Alert Report (PDF)</button>
            <button onclick="flagCriticalAlerts()">View Only Critical Alerts</button>
            <button onclick="acknowledgeAlerts()">Acknowledge & Resolve</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>

    const employeeData = [
  { id: 'EMP001', name: 'Amit', function: 'Sales', ctc: 1220000, rating: 'A' },
  { id: 'EMP002', name: 'Neha', function: 'Tech', ctc: 1340000, rating: 'B' },
  { id: 'EMP003', name: 'Ravi', function: 'Finance', ctc: 1400000, rating: 'C' },
];

const ratingToHike = {
  'A*': 12,
  'A+': 8,
  'A': 4,
  'B': 0
};

function populateIncrementTable() {
  const tbody = document.getElementById('incrementTable');
  tbody.innerHTML = '';

  employeeData.forEach(emp => {
    const hike = ratingToHike[emp.rating] || 0;
    const newCTC = emp.ctc * (1 + hike / 100);
    const row = `
      <tr>
        <td>${emp.id}</td>
        <td>${emp.name}</td>
        <td>${emp.function}</td>
        <td>₹${(emp.ctc / 100000).toFixed(2)}L</td>
        <td>${emp.rating}</td>
        <td><input type="number" value="${hike}" onchange="updateNewCTC(this, ${emp.ctc})" /></td>
        <td class="new-ctc">₹${(newCTC / 100000).toFixed(2)}L</td>
      </tr>`;
    tbody.innerHTML += row;
  });
}

function updateNewCTC(input, oldCTC) {
  const hike = parseFloat(input.value) || 0;
  const newCTC = oldCTC * (1 + hike / 100);
  input.closest('tr').querySelector('.new-ctc').textContent = `₹${(newCTC / 100000).toFixed(2)}L`;
}

function submitIncrements() {
  alert("Increments submitted successfully!");
}
function showTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
  if (tabId === 'manageIncrements') populateIncrementTable();
}


    // Simulation Chart Initialization
    let simChart;
    function initSimChart() {
      const ctx = document.getElementById('simChart').getContext('2d');
      simChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Sales', 'Tech', 'Corporate', 'Finance'],
          datasets: [{
            label: 'Simulated Impact (₹ Cr)',
            data: [0.8, 1.6, 0.7, 1.2],
            backgroundColor: ['#007bff', '#28a745', '#ffc107', '#dc3545']
          }]
        },
        options: { responsive: true }
      });
    }

    function updateSimChart() {
      const s = parseInt(document.getElementById('sliderSales').value);
      const t = parseInt(document.getElementById('sliderTech').value);
      const c = parseInt(document.getElementById('sliderCorporate').value);
      const f = parseInt(document.getElementById('sliderFinance').value);
      document.getElementById('valSales').textContent = s + '%';
      document.getElementById('valTech').textContent = t + '%';
      document.getElementById('valCorporate').textContent = c + '%';
      document.getElementById('valFinance').textContent = f + '%';
      const impact = [(s * 0.1), (t * 0.2), (c * 0.08), (f * 0.15)];
      const total = impact.reduce((a, b) => a + b, 0).toFixed(2);
      document.getElementById('simTotal').textContent = `₹${total} Cr`;
      document.getElementById('simStatus').textContent = total > 4.0 ? 'Over Budget' : 'Within Budget';
      document.getElementById('simStatus').style.color = total > 4.0 ? 'orange' : 'green';
      simChart.data.datasets[0].data = impact;
      simChart.update();
    }

    function exportSimulation() {
      alert('Simulation exported as PDF (mock action).');
    }
    function saveScenario() {
      alert('Scenario saved (mock action).');
    }

    function downloadBenchmarkPDF() {
      alert('Benchmark report downloaded (mock).');
    }
    function highlightMarketGaps() {
      alert('Highlighting significant gaps (mock).');
    }
    function adjustToMarket() {
      alert('Auto-suggesting adjustments (mock).');
    }

    function downloadExcel() {
      alert('Excel downloaded (mock).');
    }
    function downloadPDF() {
      alert('PDF downloaded (mock).');
    }
    function generateLetters() {
      alert('Letters generated (mock).');
    }
    function syncPayroll() {
      alert('Payroll synced (mock).');
    }

    function exportAlertsToPDF() {
      alert('Exported alerts as PDF (mock).');
    }
    function flagCriticalAlerts() {
      alert('Filtered critical alerts (mock).');
    }
    function acknowledgeAlerts() {
      alert('Acknowledged and resolved alerts (mock).');
    }
    function reviewZeroHikes() {
      alert('Reviewing zero hike employees (mock).');
    }
    function adjustBudget() {
      alert('Adjusting budget (mock).');
    }
    function alignMarketGap() {
      alert('Aligning to market gap (mock).');
    }

    // Initialize the Simulation chart on load
    window.onload = initSimChart;
  </script>
</body>
</html>
